{% extends "layout.html" %}
{% block title %}Users{% endblock %}
{% block headername %}Volunteer Management App{% endblock %}

{% block coordinatornav %}{{ super() }}{% endblock%}
{% block volunteer_nav %}{% endblock%}
{% block custom_navitems%}{% endblock %}

{% block content %}
<div class="container" style="margin-top:30px">
    <div class="row">
        <div class="col-sm-8">

            <h1>Volunteer list</h1>
            <br>
            <h2>Search volunteers: </h2>
            <form action="/search-volunteers" method="GET">
                <table class="table">
                    <tr>
                        <td><input class="form-control" autocomplete="off" type="text" name="query"
                                placeholder="Search by firstname, lastname, email address"></td>
                        <td><input class="btn btn-primary" type="submit" value="Submit"></td>
                    </tr>
                </table>
            </form>
            <p>As an admin you can create new users. At the moment the role coordinator can be used for same tasks as an
                admin account. With a volunteer account you can sign in and report volunteer activities.</p>
            <br>
            <p>You can also view activitities volunteers have reported on. You can post a reply to volunteer's message.
            </p>
            <br>
            <p>Below you can view volunteer accounts. You can also create accounts, edit account information or terminate an account.</p>
            <div>Number of users: {{ count }}</div>
            <table class="table">
                <thead>
                    <tr>
                        <th>User-ID</th>
                        <th>Lastname</th>
                        <th>Firstname</th>
                        <th>Email</th>
                        <th>Role</th>
                        <!-- <th>Qualifications</th> -->
                        <th>Activites done</th>
                        <th>Modify</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user.user_id }}</td>
                        <td>{{ user.lastname }}</td>
                        <td>{{ user.firstname }}</td>
                        <td>{{ user.emailÂ }}</td>
                        <td>{{user.role}}</td>
                        <td>{{ user.activitycounter }}</td>
                        <!-- <td>{{ user.string_agg }}</td> -->
                        <td><a href="view-user/{{ user.user_id }}">View details</a></td>
                    </tr>
                    {% endfor %}
                <tr>
                    <td colspan=7 class="align-right">
                        <form action="/addnew" method='GET'><input class="btn btn-link" id="addnew" name="addnew" type="submit"
                            value="Create new user" /></form>
                    </td>
                </tr>
                </tbody>
            </table>
            <div class="alert alert-warning" role="alert">
                <b>To-Do: </b>
                <ul>
                    <li>Add filter based on activity</li>
                    <li>Admin should be able to view coordinators and admins as well. </li>
                    <li>If time: Admin should be able to delete accounts</li>
                    <li>Show date of last participation</li>
                    <li>Improve and test authorization (only roles coordinator and admin can view this page and
                        subpages)</li>
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock %}